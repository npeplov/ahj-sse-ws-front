!function(){"use strict";var e={814:function(e,t,n){e.exports=n.p+"./license.txt"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new(function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gui=e,this.url="wss://npeplov-ahj-sse-ws.herokuapp.com/",this.user=null}var n,i,s;return n=t,(i=[{key:"init",value:function(){var e=this;this.wsConnect(),this.gui.chatForm.addEventListener("submit",(function(t){return e.sendMessage(t)})),this.gui.formLogin.addEventListener("submit",(function(t){return e.login(t)}))}},{key:"login",value:function(e){e.preventDefault(),this.user=this.gui.loginInput.value,this.ws.send(JSON.stringify({login:this.gui.loginInput.value})),this.gui.loginInput.value="",this.getMessages()}},{key:"sendMessage",value:function(e){e.preventDefault(),this.ws.send(JSON.stringify({message:this.gui.chatInput.value})),this.gui.chatInput.value=""}},{key:"getMessages",value:function(){this.ws.send(JSON.stringify({messagesList:!0}))}},{key:"wsConnect",value:function(){var e=this;this.ws=new WebSocket(this.url);var t=this.ws;t.binaryType="blob",t.addEventListener("open",(function(){console.log("connected people")})),t.addEventListener("close",(function(){console.log("только не дисконнект")})),t.addEventListener("message",(function(t){var n=JSON.parse(t.data);n?n[0].msg?n[0].msg&&(e.gui.chatConversation.innerHTML="",n.forEach((function(t){e.gui.drawMessagesList(t.nickname,t.msg,t.date,e.user)}))):(e.gui.usersListContainer.classList.remove("hidden"),e.gui.chat.classList.remove("hidden"),e.gui.usersList.innerHTML="",n.forEach((function(t){e.gui.drawUsersList(t.name)})),e.gui.nameIsOk()):e.gui.changeName(),console.log("response",n)}))}}])&&e(n.prototype,i),s&&e(n,s),t}())(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chat=document.querySelector(".chat"),this.chatForm=document.querySelector(".chat form"),this.chatConversation=document.querySelector(".conversations"),this.chatInput=this.chatForm.querySelector("input"),this.loginDiv=document.querySelector(".login"),this.formLogin=document.querySelector(".login form"),this.loginInput=this.formLogin.querySelector("input"),this.loginLabel=this.formLogin.querySelector("label"),this.usersListContainer=document.querySelector(".users_list"),this.usersList=document.querySelector(".users_list ul"),this.widget=document.querySelector(".widget")}var n,i,s;return n=e,(i=[{key:"drawUsersList",value:function(e){this.usersList.innerHTML+="\n      <li>".concat(e,"</li>\n    ")}},{key:"changeName",value:function(){this.loginLabel.style.color="red",this.loginInput.classList.add("invalid"),this.loginLabel.innerHTML="Select another name"}},{key:"nameIsOk",value:function(){this.loginDiv.classList.add("hidden"),this.loginLabel.style.color="ingerit",this.loginInput.classList.remove("invalid"),this.loginLabel.innerHTML="Enter your name"}},{key:"drawMessagesList",value:function(e,t,n,i){var s="",r=e;e===i&&(s=" you",r="You"),this.chatConversation.innerHTML+='\n    <div class="message'.concat(s,'">\n    <span>').concat(r,", ").concat(n,"</span>\n    ").concat(t,"\n    </div>\n    ")}}])&&t(n.prototype,i),s&&t(n,s),e}())).init();n(814)}()}();